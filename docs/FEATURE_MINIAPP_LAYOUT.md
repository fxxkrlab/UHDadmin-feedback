# MiniApp ä¸»ç•Œé¢å¸ƒå±€ / MiniApp Home Layout

[English Version](#english-version)

## 1. æ¦‚è¿°

MiniApp ä¸»ç•Œé¢æ˜¯ Telegram MiniApp ç”¨æˆ·ç™»å½•åçš„ä¸»è¦æ“ä½œé¡µé¢ã€‚v1.1.21 ç‰ˆæœ¬è¿›è¡Œäº†é‡å¤§é‡æ„ï¼Œç”¨å›ºå®šç½‘æ ¼å¸ƒå±€æ›¿ä»£äº†å¯æ‹–æ‹½çš„ Splitpanes ç»„ä»¶ã€‚

## 2. å¸ƒå±€è®¾è®¡ (Round-LAYOUT-01)

### 2.1 é—®é¢˜èƒŒæ™¯

æ—§ç‰ˆä½¿ç”¨ Splitpanes å¯æ‹–æ‹½åˆ†æ å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š
- æ‰‹æœºä¸Šå®¹æ˜“è¯¯è§¦å¯¼è‡´é¢æ¿è¢«æ‹–ä¹±
- æ»šåŠ¨å†²çªï¼Œç”¨æˆ·ä½“éªŒå·®
- åˆ†åŒºæ¯”ä¾‹ä¸å¥½æ§åˆ¶
- è§¦æ‘¸è®¾å¤‡ä¸Šéš¾ä»¥ç²¾ç¡®æ“ä½œ

### 2.2 æ–°å¸ƒå±€ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ğŸ“¢ å…¬å‘Šæ¨ªå¹…                    â”‚
â”‚  (æœ€å¤šæ˜¾ç¤º3æ¡æ ‡é¢˜ + "View All" æŒ‰é’®)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  MY     â”‚ â”‚ ç”¨æˆ·å                   â”‚ â”‚
â”‚ â”‚  INFO   â”‚ â”‚ ID: #12345              â”‚ â”‚
â”‚ â”‚ (æ ‡ç­¾)   â”‚ â”‚ Level: Lv.5            â”‚ â”‚
â”‚ â”‚         â”‚ â”‚ è§’è‰²: VIP               â”‚ â”‚
â”‚ â”‚         â”‚ â”‚ ç§°å·: èµ„æ·±ç”¨æˆ·           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Seat Balance: 3        â”‚ â”‚ MEDIA   â”‚ â”‚
â”‚ â”‚ Active Accounts: 2     â”‚ â”‚ACCOUNTS â”‚ â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚ â”‚ (æ ‡ç­¾)   â”‚ â”‚
â”‚ â”‚ user1 | 2026/03/01    â”‚ â”‚         â”‚ â”‚
â”‚ â”‚ user2 | æ°¸ä¹…           â”‚ â”‚         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  ç­¾åˆ°   â”‚ â”‚  â—€ 2026å¹´2æœˆ â–¶  [ç­¾åˆ°]  â”‚ â”‚
â”‚ â”‚  æ—¥å†   â”‚ â”‚  æ—¥ ä¸€ äºŒ ä¸‰ å›› äº” å…­    â”‚ â”‚
â”‚ â”‚ (æ ‡ç­¾)   â”‚ â”‚     1  2  3  4  5  6   â”‚ â”‚
â”‚ â”‚         â”‚ â”‚  7  8  9 10 11 12 13   â”‚ â”‚
â”‚ â”‚         â”‚ â”‚ 14 15 16 17 18 19 20   â”‚ â”‚
â”‚ â”‚         â”‚ â”‚ 21 22 23 24 25 26 27   â”‚ â”‚
â”‚ â”‚         â”‚ â”‚ 28                      â”‚ â”‚
â”‚ â”‚         â”‚ â”‚ æœ¬æœˆ: 5å¤© ç§¯åˆ†: +50     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              ğŸ  è¿”å›é¦–é¡µ                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 è®¾è®¡ç‰¹ç‚¹

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **å›ºå®šç½‘æ ¼** | ä¸å¯æ‹–æ‹½ï¼Œé¿å…è¯¯æ“ä½œ |
| **äº¤æ›¿æ’åˆ—** | æ ‡ç­¾å—å·¦å³äº¤æ›¿ï¼Œå¢å¼ºè§†è§‰å±‚æ¬¡ |
| **æ¸å˜æ ‡ç­¾** | `linear-gradient(135deg, #6366f1, #8b5cf6)` è“ç´«æ¸å˜ |
| **ä¸­æ–‡ UI** | æ—¥å†ä½¿ç”¨ä¸­æ–‡æ˜ŸæœŸå’Œæœˆä»½ |
| **å“åº”å¼** | é€‚é…ä¸åŒå±å¹•å°ºå¯¸ |

## 3. ç»„ä»¶è¯´æ˜

### 3.1 å…¬å‘Šæ¨ªå¹…

```vue
<div class="announcement-banner">
  <div class="banner-header">
    <span class="banner-icon">ğŸ“¢</span>
    <span class="banner-title">å…¬å‘Š</span>
    <button class="view-all-btn">View All</button>
  </div>
  <div class="banner-list">
    <!-- æœ€å¤šæ˜¾ç¤º3æ¡å…¬å‘Šæ ‡é¢˜ -->
  </div>
</div>
```

**åŠŸèƒ½**ï¼š
- æ˜¾ç¤ºæœ€è¿‘3æ¡å…¬å‘Šæ ‡é¢˜
- æ”¯æŒé‡Œç¨‹ç¢‘å…¬å‘Šæ ‡è®° ğŸ†
- ç‚¹å‡»è·³è½¬åˆ°å…¬å‘Šè¯¦æƒ…é¡µ
- "View All" æŸ¥çœ‹å…¨éƒ¨å…¬å‘Š

### 3.2 MY INFO åŒºå—

| å­—æ®µ | æ•°æ®æ¥æº |
|------|----------|
| ç”¨æˆ·å | `frontProfile.username` æˆ– `userData.username` |
| ID | `frontProfile.public_id` æˆ– `userData.display_id` |
| Level | `frontProfile.level` æˆ– `levelInfo.level` |
| è§’è‰² | `frontProfile.role_display_name` |
| ç§°å· | `frontProfile.growth_role` æˆ– `levelInfo.growth_role.nickname` |

### 3.3 MEDIA ACCOUNTS åŒºå—

| å­—æ®µ | è¯´æ˜ |
|------|------|
| Seat Balance | ç”¨æˆ·å¯ç”¨å¸­ä½æ•°é‡ |
| Active Accounts | æ´»è·ƒåª’ä½“è´¦æˆ·æ•°é‡ |
| è´¦æˆ·åˆ—è¡¨ | æ˜¾ç¤ºå‰2ä¸ªè´¦æˆ·çš„ç”¨æˆ·åå’Œåˆ°æœŸæ—¶é—´ |

**äº¤äº’**ï¼šæ•´ä¸ªåŒºå—å¯ç‚¹å‡»ï¼Œè·³è½¬åˆ°åª’ä½“è´¦æˆ·ç®¡ç†é¡µé¢ã€‚

### 3.4 ç­¾åˆ°æ—¥å†åŒºå—

```mermaid
flowchart TB
    subgraph æ—¥å†åŠŸèƒ½
        CAL[æ—¥å†ç½‘æ ¼] --> TODAY[ä»Šæ—¥ç­¾åˆ°æŒ‰é’®]
        CAL --> HISTORY[å†å²ç­¾åˆ°è®°å½•]
        CAL --> MAKEUP[è¡¥ç­¾åŠŸèƒ½]
    end

    subgraph çŠ¶æ€æ˜¾ç¤º
        CHECKED[âœ“ å·²ç­¾åˆ°] --> GREEN[ç»¿è‰²èƒŒæ™¯]
        CANMAKEUP[å¯è¡¥ç­¾] --> YELLOW[é»„è‰²è™šçº¿è¾¹æ¡†]
        EVENT[ğŸ‰ Event] --> ORANGE[æ©™è‰²èƒŒæ™¯]
    end
```

**æ—¥å†çŠ¶æ€**ï¼š
| çŠ¶æ€ | æ ·å¼ | è¯´æ˜ |
|------|------|------|
| ä»Šæ—¥ | è“ç´«è¾¹æ¡† + åŠ ç²— | å½“å¤©æ—¥æœŸ |
| å·²ç­¾åˆ° | ç»¿è‰²èƒŒæ™¯ + âœ“ | å·²å®Œæˆç­¾åˆ° |
| å¯è¡¥ç­¾ | é»„è‰²èƒŒæ™¯ + è™šçº¿è¾¹æ¡† | å¯ä»¥è¡¥ç­¾çš„æ—¥æœŸ |
| Event | æ©™è‰²èƒŒæ™¯ | æ´»åŠ¨æœŸé—´ç­¾åˆ° |

## 4. CSS æ ·å¼

### 4.1 æ ‡ç­¾å—æ¸å˜

```css
.grid-label {
  width: 70px;
  min-width: 70px;
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
  display: flex;
  align-items: center;
  justify-content: center;
}

.label-text {
  color: white;
  font-size: 13px;
  font-weight: 700;
  text-align: center;
  line-height: 1.3;
}
```

### 4.2 æ—¥å†ç½‘æ ¼

```css
.cal-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
}

.cal-day {
  aspect-ratio: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  font-size: 12px;
}
```

## 5. æ•°æ®æµ

```mermaid
flowchart LR
    subgraph API
        PROFILE[/front-profile] --> FP[frontProfile]
        LEVEL[/user/level] --> LI[levelInfo]
        CHECKIN[/user/checkin/status] --> CS[checkinStatus]
        CALENDAR[/user/checkin/calendar] --> CD[calendarData]
        MEDIA[/user/media-accounts] --> MA[mediaAccounts]
        SEATS[/shop/seats/balance] --> SB[seatBalance]
        ANN[/announcements/published] --> AN[announcements]
    end

    subgraph æ¸²æŸ“
        FP --> MYINFO[MY INFO åŒºå—]
        LI --> MYINFO
        SB --> MEDIABLOCK[MEDIA ACCOUNTS åŒºå—]
        MA --> MEDIABLOCK
        CS --> CALBLOCK[ç­¾åˆ°æ—¥å†åŒºå—]
        CD --> CALBLOCK
        AN --> ANNBLOCK[å…¬å‘Šæ¨ªå¹…]
    end
```

## 6. ç›¸å…³æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `nuxt-portal/pages/miniapp.vue` | MiniApp ä¸»é¡µé¢ï¼ŒåŒ…å«æ‰€æœ‰å¸ƒå±€ä»£ç  |
| `nuxt-portal/utils/calendarUtils.ts` | æ—¥å†å·¥å…·å‡½æ•° |

---

# English Version

## 1. Overview

The MiniApp home page is the main interface for Telegram MiniApp users after login. Version 1.1.21 introduced a major redesign, replacing the draggable Splitpanes with a fixed grid layout.

## 2. Layout Design

### Problem Background

The old Splitpanes layout had issues:
- Easy to accidentally drag panels on mobile
- Scroll conflicts causing poor UX
- Difficult to control panel proportions
- Hard to operate precisely on touch devices

### New Layout

The new layout uses a fixed grid with alternating left/right label blocks:

1. **Announcement Banner** - Top area showing up to 3 announcement titles
2. **MY INFO Row** - Label left, content right (username, ID, level, role, title)
3. **MEDIA ACCOUNTS Row** - Content left, label right (seat balance, active accounts, account list)
4. **Check-in Calendar Row** - Label left, calendar right (full calendar with check-in/makeup features)
5. **Back to Home Button** - Bottom navigation

### Design Features

| Feature | Description |
|---------|-------------|
| Fixed Grid | No dragging, prevents accidental operations |
| Alternating Layout | Labels alternate left/right for visual hierarchy |
| Gradient Labels | Blue-purple gradient `linear-gradient(135deg, #6366f1, #8b5cf6)` |
| Chinese UI | Calendar uses Chinese weekdays and months |
| Responsive | Adapts to different screen sizes |

## 3. Related Files

| File | Description |
|------|-------------|
| `nuxt-portal/pages/miniapp.vue` | Main MiniApp page with layout code |
| `nuxt-portal/utils/calendarUtils.ts` | Calendar utility functions |
